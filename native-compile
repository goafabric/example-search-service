#!/bin/bash
mvn clean package -Pdocker-image-native,fat-jar,persistence-elastic -DskipTests=true -Dspring-boot.build-image.skip=true
cd example-search-service-core
(rm -rf target/native && mkdir -p target/native && cd target/native && jar -xvf ../*-fat.jar >/dev/null 2>&1 && cp -R META-INF BOOT-INF/classes \
&& $GRAALVM_HOME/bin/native-image -H:Name=my-app -cp BOOT-INF/classes:`find BOOT-INF/lib | tr '\n' ':'`)